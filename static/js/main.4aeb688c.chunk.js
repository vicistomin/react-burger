(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{103:function(e,t,n){e.exports={burger_ingredients_list:"burger-ingredients-category_burger_ingredients_list__3jb2q"}},104:function(e,t,n){e.exports={modal_overlay:"modal-overlay_modal_overlay__1H0v3"}},105:function(e,t,n){e.exports={form_container:"form_form_container__3je-O flex_column"}},106:function(e,t,n){e.exports={reset_password_container:"reset-password_reset_password_container__3B6g0"}},107:function(e,t,n){e.exports={orders_list:"orders-list_orders_list__3-hvV flex_column pr-2 scroll"}},108:function(e,t,n){e.exports={fullscreen_message:"not-found_fullscreen_message__3jZtS fullscreen_message"}},115:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(31),a=n.n(s),i=(n(115),n(41)),o=function(){return Object(i.b)()},l=i.c,u=n(8),d=n(5),_=n(57),m=n(11),j="https://norma.nomoreparties.space/api/ingredients",f="https://norma.nomoreparties.space/api/orders",b="https://norma.nomoreparties.space/api/password-reset",p="https://norma.nomoreparties.space/api/password-reset/reset",x="https://norma.nomoreparties.space/api/auth/register",h="https://norma.nomoreparties.space/api/auth/login",O="https://norma.nomoreparties.space/api/auth/logout",g="https://norma.nomoreparties.space/api/auth/user",v="wss://norma.nomoreparties.space/orders/all",y="wss://norma.nomoreparties.space/orders",w=Object(m.b)({name:"items",initialState:{items:[],itemsRequest:!1,itemsFailed:!1,itemsSuccess:!1},reducers:{request:function(e){e.itemsRequest=!0,e.itemsFailed=!1,e.itemsSuccess=!1},failed:function(e){e.itemsFailed=!0,e.itemsRequest=!1,e.itemsSuccess=!1},success:function(e,t){e.itemsSuccess=!0,e.itemsRequest=!1,e.itemsFailed=!1,e.items=t.payload},increaseQuantityValue:function(e,t){e.items=Object(_.a)(e.items).map((function(e){return e._id===t.payload?Object(d.a)(Object(d.a)({},e),{},{__v:(e.__v||0)+1}):e}))},decreaseQuantityValue:function(e,t){e.items=Object(_.a)(e.items).map((function(e){return e._id===t.payload?Object(d.a)(Object(d.a)({},e),{},{__v:(e.__v||1)-1}):e}))},clearValues:function(e){e.items=Object(_.a)(e.items).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{__v:0})}))}}}),N=n(52),k=n.n(N),S=n(2),C=n(194),T=n(24),E=n.n(T),I=n(4),F=n(195),q=n(32),z=n.n(q),R=Object(m.b)({name:"burgerConstructor",initialState:{bunItem:{},middleItems:[],totalPrice:0},reducers:{setBunItem:function(e,t){e.bunItem=t.payload},addMiddleItem:function(e,t){e.middleItems.push(t.payload)},moveMiddleItem:function(e,t){var n=e.middleItems.splice(t.payload.oldIndex,1);e.middleItems.splice(t.payload.newIndex,0,n[0])},deleteMiddleItem:function(e,t){e.middleItems.splice(t.payload,1)},clearMiddleItems:function(e){e.middleItems=[]},calcTotalPrice:function(e){e.bunItem.name&&e.bunItem.price?e.totalPrice=2*e.bunItem.price+e.middleItems.reduce((function(e,t){return e+(t.price||0)}),0):e.middleItems.length?e.totalPrice=e.middleItems.reduce((function(e,t){return e+(t.price||0)}),0):e.totalPrice=0}}}),A=n(0),M=function(e){var t=e.item,n=e.index,r=o(),s=w.actions.decreaseQuantityValue,a=R.actions,i=a.moveMiddleItem,l=a.deleteMiddleItem,u=Object(c.useRef)(null),d=Object(c.useState)(!1),_=Object(S.a)(d,2),m=_[0],j=_[1],f=Object(c.useState)(!1),b=Object(S.a)(f,2),p=b[0],x=b[1],h=Object(C.a)({accept:"sortedIngredient",drop:function(){return{index:n}},collect:function(e){return{targetId:e.getHandlerId(),isItemHover:e.isOver(),offset:e.getDifferenceFromInitialOffset()}}}),O=Object(S.a)(h,2),g=O[0],v=g.targetId,y=g.isItemHover,N=g.offset,k=O[1],T=Object(F.a)({type:"sortedIngredient",item:t,collect:function(e){return{sourceId:e.getHandlerId(),isItemDragging:e.isDragging()}},end:function(e,t){var c;t.didDrop()&&null!==t.getDropResult()&&r(i({oldIndex:n,newIndex:(null===(c=t.getDropResult())||void 0===c?void 0:c.index)||0}))}}),E=Object(S.a)(T,2),q=E[0],M=q.sourceId,D=q.isItemDragging,B=E[1];return Object(c.useEffect)((function(){N&&(j(N.y<0),x(N.y>0))}),[N]),B(k(u)),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("li",{className:"".concat(z.a.draggable_list_item,"\n                ").concat(D?z.a.dragged:null,"\n                ").concat(y&&m?z.a.pushedUp:y&&p?z.a.pushedDown:null),ref:u,"data-source-id":M,"data-target-id":v,children:[Object(A.jsx)("span",{className:z.a.drag_icon,children:Object(A.jsx)(I.DragIcon,{type:"primary"})}),!!t.name&&!!t.image&&!!t.price&&Object(A.jsx)(I.ConstructorElement,{text:t.name,thumbnail:t.image,price:t.price,handleClose:function(){return!!t._id&&function(e,t){r(l(t)),r(s(e))}(t._id,n)}})]})})},D=function(e){var t,n=new Date(e),c=function(e){var t=new Date(Date.now()),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),c=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((c-n)/864e5)}(n),r=0===c?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===c?"\u0412\u0447\u0435\u0440\u0430":"".concat(c," ").concat((t=c)%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?"\u0434\u043d\u044f":"\u0434\u043d\u0435\u0439"," \u043d\u0430\u0437\u0430\u0434"),s=n.getHours().toString().padStart(2,"0"),a=n.getMinutes().toString().padStart(2,"0"),i=new Intl.NumberFormat("ru-RU",{signDisplay:"exceptZero"}).format(0-n.getTimezoneOffset()/60);return"".concat(r,", ").concat(s,":").concat(a," i-GMT").concat(i)};function B(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([$?*|{}\]\\^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("number"==typeof n.expires&&n.expires){var c=new Date;c.setTime(c.getTime()+1e3*n.expires),n.expires=c}n.expires instanceof Date&&n.expires&&(n.expires=n.expires.toUTCString());var r,s=encodeURIComponent(t),a=e+"="+s;for(r in n){a+="; "+r;var i=n[r];!0!==i&&(a+="="+i)}document.cookie=a}function U(e){P(e,"",{path:"/",expires:-1})}var L=Object(m.b)({name:"ws",initialState:{wsConnected:!1,wsError:!1},reducers:{wsConnectionStart:function(e,t){},wsConnectionStop:function(e){e.wsConnected=!1,e.wsError=!1},wsConnectionSuccess:function(e){e.wsConnected=!0,e.wsError=!1},wsConnectionError:function(e){e.wsConnected=!1,e.wsError=!0},wsConnectionClosed:function(e){e.wsConnected=!1,e.wsError=!1}}}),V=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(L.actions.wsConnectionStart({url:v})),e(J.actions.request())}},H=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(L.actions.wsConnectionStop())}},J=Object(m.b)({name:"feed",initialState:{orders:[],feedRequest:!1,feedFailed:!1,feedSuccess:!1,ordersTotal:0,ordersTotalToday:0},reducers:{request:function(e){e.feedRequest=!0,e.feedFailed=!1,e.feedSuccess=!1},failed:function(e){e.feedFailed=!0,e.feedRequest=!1,e.feedSuccess=!1},success:function(e){e.feedSuccess=!0,e.feedRequest=!1,e.feedFailed=!1},setOrdersData:function(e,t){var n;e.orders=((n=t.payload.orders).sort((function(e,t){if(e.updatedAt&&t.updatedAt){var n=new Date(e.updatedAt);return new Date(t.updatedAt).valueOf()-n.valueOf()}return 0})),n),e.ordersTotal=t.payload.total,e.ordersTotalToday=t.payload.totalToday}}}),W=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),t=B("accessToken")||"",n=new Headers;n.append("Content-Type","application/json"),n.append("Authorization",t),e(K.actions.request()),fetch(g,{method:"GET",headers:n}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!0===t.success)e(K.actions.setName(t.user.name)),e(K.actions.setEmail(t.user.email)),e(K.actions.setAuthorization(!0)),e(K.actions.success());else if("You should be authorised"===t.message)e(K.actions.setAuthorization(!1)),e(K.actions.success());else{if("jwt expired"!==t.message)throw Error(t.message);X().then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!0!==t.success)throw Error(t.message);P("accessToken",t.accessToken,{path:"/"}),P("refreshToken",t.refreshToken,{path:"/"}),n.delete("Authorization"),n.append("Authorization",t.accessToken||""),fetch(g,{method:"GET",headers:n}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(t.success)e(K.actions.setName(t.user.name)),e(K.actions.setEmail(t.user.email)),e(K.actions.setAuthorization(!0)),e(K.actions.success());else{if("You should be authorised"!==t.message)throw Error(t.message);e(K.actions.setAuthorization(!1)),e(K.actions.success())}})).catch((function(t){e(K.actions.setAuthorization(!1)),e(K.actions.failed()),console.log(t)}))})).catch((function(t){e(K.actions.setAuthorization(!1)),e(K.actions.failed()),console.log(t)}))}})).catch((function(t){e(K.actions.setAuthorization(!1)),e(K.actions.failed()),console.log(t)}))}},X=function(){return fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:B("refreshToken")})})},Z=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(L.actions.wsConnectionStart({url:y,token:(B("accessToken")||"").replace("Bearer ","")})),e(J.actions.request())}},Q=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(L.actions.wsConnectionStop())}},G="123456",Y={user:{password:G},userRequest:!1,userFailed:!1,userSuccess:!1,isAuthorized:!1},K=Object(m.b)({name:"user",initialState:Y,reducers:{request:function(e){e.userRequest=!0,e.userFailed=!1,e.userSuccess=!1},failed:function(e){e.userFailed=!0,e.userRequest=!1,e.userSuccess=!1},success:function(e){e.userSuccess=!0,e.userRequest=!1,e.userFailed=!1},setName:function(e,t){e.user=Object(d.a)(Object(d.a)({},e.user),{},{name:t.payload})},setPassword:function(e,t){e.user=Object(d.a)(Object(d.a)({},e.user),{},{password:t.payload})},setEmail:function(e,t){e.user=Object(d.a)(Object(d.a)({},e.user),{},{email:t.payload})},resetStatus:function(e){e.userFailed=!1},resetUserData:function(e){e.user.name="",e.user.email="",e.user.password=G},setAuthorization:function(e,t){e.isAuthorized=t.payload},checkAuthorization:function(e){e.isAuthorized=""!==B("accessToken")&&""!==B("refreshToken")}}}),$=Object(m.b)({name:"order",initialState:{orderData:{},orderRequest:!1,orderFailed:!1,orderSuccess:!1,isOrderModalOpen:!1},reducers:{request:function(e){e.orderRequest=!0,e.orderFailed=!1,e.orderSuccess=!1,e.orderData={}},failed:function(e){e.orderFailed=!0,e.orderRequest=!1,e.orderSuccess=!1,e.orderData={success:!1}},success:function(e,t){e.orderSuccess=!0,e.orderRequest=!1,e.orderFailed=!1,e.orderData={name:t.payload.name,id:t.payload.number,success:t.payload.success}},openOrderModal:function(e){e.isOrderModalOpen=!0},closeOrderModal:function(e){e.isOrderModalOpen=!1}}}),ee=function(){var e=o(),t=w.actions,n=t.increaseQuantityValue,r=t.decreaseQuantityValue,s=R.actions,a=s.setBunItem,i=s.calcTotalPrice,d=l((function(e){return e.burgerConstructor})),_=d.bunItem,m=d.middleItems,j=d.totalPrice,b=l((function(e){return e.user})).isAuthorized,p=Object(u.g)();Object(c.useEffect)((function(){e(i())}),[e,_,m,i]);var x=function(t){e(a(t)),_._id&&(e(r(_._id)),e(r(_._id))),t._id&&(e(n(t._id)),e(n(t._id)))},h=Object(C.a)({accept:"bun",drop:function(e){x(e)}}),O=Object(S.a)(h,2)[1],g=Object(C.a)({accept:"bun",drop:function(e){x(e)}}),v=Object(S.a)(g,2)[1],y=Object(C.a)({accept:["sauce","main"]}),N=Object(S.a)(y,2)[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("ul",{className:E.a.burger_constructor_list+" ml-4 mt-25 mb-10 pr-4",children:[Object(A.jsx)("li",{className:"pl-8",ref:O,children:_.name?Object(A.jsx)(I.ConstructorElement,{type:"top",isLocked:!0,text:_.name+" (\u0432\u0435\u0440\u0445)",thumbnail:_.image||"",price:_.price||0}):Object(A.jsx)("div",{className:E.a.emptyBun+" constructor-element constructor-element_pos_top",children:"\xa0"})}),Object(A.jsx)("li",{ref:N,children:m.length>0?Object(A.jsx)("ul",{className:E.a.burger_constructor_draggable_list+" pr-2",children:m.map((function(e,t){return Object(A.jsx)(M,{item:e,index:t},(e._id||"")+Math.floor(1e4*Math.random()))}))},"middle_items"):Object(A.jsx)("h3",{className:E.a.warningText+" text text_type_main-default text_color_inactive pt-6 pb-6",children:0===j?"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b":"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})}),Object(A.jsx)("li",{className:"pl-8",ref:v,children:_.name?Object(A.jsx)(I.ConstructorElement,{isLocked:!0,type:"bottom",text:_.name+" (\u043d\u0438\u0437)",thumbnail:_.image||"",price:_.price||0}):Object(A.jsx)("div",{className:E.a.emptyBun+" constructor-element constructor-element_pos_bottom",children:"\xa0"})})]}),Object(A.jsxs)("div",{className:"".concat(E.a.burger_constructor_order,"\n                    mr-4 mb-10\n                    ").concat(_.name?null:E.a.disabled),children:[Object(A.jsx)("p",{className:"text text_type_digits-medium",children:j}),Object(A.jsx)("span",{className:"ml-2 mr-10",children:Object(A.jsx)(I.CurrencyIcon,{type:"primary"})}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:_.name?function(){if(b){if(_._id){var t=[_._id];m.map((function(e){return e._id&&t.push(e._id)})),e(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();t($.actions.request()),t($.actions.openOrderModal()),fetch(f,{method:"POST",headers:{"Content-Type":"application/json",Authorization:B("accessToken")},body:JSON.stringify({ingredients:e})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(n){if(n.success)t($.actions.success({name:n.name,number:n.order.number,success:n.success}));else{if(!n.message||"jwt expired"!==n.message)throw Error(n.message);t($.actions.request()),X().then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(n){if(!0!==n.success)throw Error(n.message);P("accessToken",n.accessToken,{path:"/"}),P("refreshToken",n.refreshToken,{path:"/"}),t($.actions.request()),fetch(f,{method:"POST",headers:{"Content-Type":"application/json",Authorization:B("accessToken")},body:JSON.stringify({ingredients:e})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(e){if(!e.success)throw Error(e.message);t($.actions.success({name:e.name,number:e.order.number,success:e.success}))})).catch((function(e){t($.actions.failed()),console.log(e)}))})).catch((function(e){t($.actions.failed()),console.log(e)}))}})).catch((function(e){t($.actions.failed()),console.log(e)})).finally((function(){t(R.actions.setBunItem({})),t(R.actions.clearMiddleItems()),t(w.actions.clearValues())}))}}(t))}}else p.replace({pathname:"/login",state:{from:"/"}})}:function(){},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},te=n(53),ne=n(79),ce=n.n(ne),re=n(103),se=n.n(re),ae=n(80),ie=n.n(ae),oe=Object(c.memo)((function(e){var t=o(),n=w.actions.increaseQuantityValue,c=R.actions.addMiddleItem,r=Object(u.g)(),s=Object(F.a)({type:e.type||"",item:e,collect:function(e){return{opacity:e.isDragging()?.5:1}},end:function(e,r){r.didDrop()&&"bun"!==e.type&&e._id&&(t(c(e)),t(n(e._id)))}}),a=Object(S.a)(s,2),i=a[0].opacity,l=a[1];return Object(A.jsx)("li",{children:Object(A.jsxs)("div",{className:ie.a.ingredient_card,onClick:function(){r.replace({pathname:"/ingredients/".concat(e._id),state:{background:r.location}})},ref:l,style:{opacity:i},children:[e.__v?Object(A.jsx)(I.Counter,{count:e.__v}):null,Object(A.jsx)("img",{src:e.image,alt:e.name,title:e.name,className:"ml-4 mr-4"}),Object(A.jsxs)("div",{className:"flex_row mt-1 mb-1 ",children:[Object(A.jsx)("p",{className:"pr-2 text text_type_digits-default",children:e.price}),Object(A.jsx)(I.CurrencyIcon,{type:"primary"})]}),Object(A.jsx)("p",{className:ie.a.ingredient_name+" text text_type_main-default",children:e.name})]})})})),le=Object(c.forwardRef)((function(e,t){return Object(A.jsxs)("section",{id:e.categoryId,ref:t,children:[Object(A.jsx)("h2",{className:"text text_type_main-medium pt-10 mb-6",children:e.heading}),e.items.length>0?Object(A.jsx)("ul",{className:se.a.burger_ingredients_list+" ml-4 mt-6 mr-2 mb-10",children:e.items.map((function(e){return Object(A.jsx)(oe,Object(d.a)({},e),e._id)}))}):Object(A.jsx)("h3",{className:"text text_type_main-default text_color_inactive pb-6",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043f\u0443\u0441\u0442\u0430"})]})})),ue=function(){var e=Object(c.useState)("bun"),t=Object(S.a)(e,2),n=t[0],r=t[1],s=l((function(e){return e.items})).items,a=function(e){var t;r(e),null===(t=document.getElementById(e))||void 0===t||t.scrollIntoView({behavior:"smooth"})},i={threshold:0,trackVisibility:!0,delay:100},o=Object(te.a)(i),u=Object(S.a)(o,2),d=u[0],_=u[1],m=Object(te.a)(i),j=Object(S.a)(m,2),f=j[0],b=j[1],p=Object(te.a)(i),x=Object(S.a)(p,2),h=x[0],O=x[1];return Object(c.useEffect)((function(){_?r("bun"):O?r("sauce"):b&&r("main")}),[_,b,O]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(A.jsxs)("div",{className:ce.a.tab_selector,children:[Object(A.jsx)(I.Tab,{active:"bun"===n,onClick:function(){a("bun")},value:"\u0411\u0443\u043b\u043a\u0438",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(A.jsx)(I.Tab,{active:"sauce"===n,onClick:function(){a("sauce")},value:"\u0421\u043e\u0443\u0441\u044b",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(A.jsx)(I.Tab,{active:"main"===n,onClick:function(){a("main")},value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(A.jsxs)("div",{className:ce.a.scroll_container,children:[Object(A.jsx)(le,{heading:"\u0411\u0443\u043b\u043a\u0438",categoryId:"bun",items:s.filter((function(e){return"bun"===e.type})),ref:d}),Object(A.jsx)(le,{heading:"\u0421\u043e\u0443\u0441\u044b",categoryId:"sauce",items:s.filter((function(e){return"sauce"===e.type})),ref:h}),Object(A.jsx)(le,{heading:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",categoryId:"main",items:s.filter((function(e){return"main"===e.type})),ref:f})]})]})},de=n(42),_e=n.n(de),me=n(104),je=n.n(me),fe=function(e){var t=e.closeModal;return Object(A.jsx)("div",{className:je.a.modal_overlay,onClick:t})},be=document.getElementById("modal-root"),pe=function(e){var t=e.children,n=e.header,r=e.closeModal,s=e.isFancyCloseIcon,i=void 0!==s&&s,o=e.isOrderModal,l=void 0!==o&&o,u=function(e){"Escape"===e.key&&r(),e.stopImmediatePropagation()};return Object(c.useEffect)((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}),[]),a.a.createPortal(Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(fe,{closeModal:r}),Object(A.jsxs)("div",{className:_e.a.modal_container+" pl-10 pt-10 pr-10 pb-15",children:[Object(A.jsx)("h3",{className:"".concat(_e.a.modal_header," ").concat(l?"text text_type_digits-default":"text text_type_main-large"),children:n}),Object(A.jsx)("span",{className:"".concat(_e.a.close_icon," ").concat(i?_e.a.fancy_icon:null),children:Object(A.jsx)(I.CloseIcon,{onClick:r,type:"primary"})}),t]})]}),be)},xe=n(54),he=n.n(xe),Oe=n.p+"static/media/order-accepted.5cbcff83.gif",ge=n(81),ve=n.n(ge),ye=n.p+"static/media/logo.9edb13be.png",we=function(){return Object(A.jsx)("div",{className:ve.a.loader,children:Object(A.jsx)("img",{src:ye,alt:"",title:"",className:ve.a.spinner})})},Ne=function(){var e=l((function(e){return e.order})),t=e.orderData,n=e.orderRequest,c=e.orderSuccess,r=e.orderFailed;return Object(A.jsxs)("div",{className:he.a.order_details_container+" mt-20 mb-15",children:[n&&!r&&!c&&Object(A.jsx)("div",{className:he.a.loader_container,children:Object(A.jsx)(we,{})}),r&&!n&&!c&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("p",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-8 mb-15",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043f\u043e\u0437\u0436\u0435"})]}),c&&!r&&!n&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("p",{className:he.a.order_id+" text text_type_digits-large",children:t.id}),Object(A.jsx)("p",{className:"text text_type_main-medium mt-8 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(A.jsx)("img",{src:Oe+"?v="+Math.floor(100*Math.random()),alt:"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",title:"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",height:"120"}),Object(A.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})},ke=n(109),Se=n(193),Ce=function(){var e=o(),t=$.actions.closeOrderModal,n=K.actions.checkAuthorization,r=l((function(e){return e.items})),s=r.itemsRequest,a=r.itemsSuccess,i=r.itemsFailed,u=l((function(e){return e.order})).isOrderModalOpen;return Object(c.useEffect)((function(){e(n())}),[]),Object(A.jsxs)(A.Fragment,{children:[i&&!s&&!a&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),s&&!i&&!a&&Object(A.jsx)(we,{}),a&&!i&&!s&&Object(A.jsx)("div",{className:k.a.container,children:Object(A.jsxs)(Se.a,{backend:ke.a,children:[Object(A.jsx)("section",{className:k.a.container_left+" mr-5",children:Object(A.jsx)(ue,{})}),Object(A.jsx)("section",{className:k.a.container_right+" ml-5",children:Object(A.jsx)(ee,{})})]})}),u&&Object(A.jsx)(pe,{header:null,closeModal:function(){e(t())},isFancyCloseIcon:!0,children:Object(A.jsx)(Ne,{})})]})},Te=n(105),Ee=n.n(Te),Ie=function(e){return Object(A.jsxs)("form",{className:Ee.a.form_container,autoComplete:"on",onSubmit:e.onFormSubmit,children:[e.title&&Object(A.jsx)("label",{className:"text text_type_main-medium",children:e.title}),e.children,e.actionName&&Object(A.jsx)(I.Button,{type:"primary",size:"medium",children:e.actionName})]})},Fe=function(){var e=o(),t=l((function(e){return e.user})),n=t.userRequest,r=t.userSuccess,s=t.userFailed,a=K.actions.resetStatus,i=Object(u.g)(),d=Object(u.h)(),_=function(){e(a())};Object(c.useEffect)((function(){_()}),[]);var m=Object(c.useState)(""),j=Object(S.a)(m,2),f=j[0],b=j[1],p=Object(c.useState)(!0),x=Object(S.a)(p,2),O=x[0],g=x[1],v=Object(c.useState)(""),y=Object(S.a)(v,2),w=y[0],N=y[1],k=Object(c.useState)(!1),C=Object(S.a)(k,2),T=C[0],E=C[1],F=Object(c.useRef)(null),q=/.+@.+\.[A-Za-z]+$/,z=Object(c.useCallback)((function(){var e={email:!1,password:!1};return q.test(f)?e.email=!0:g(!1),w.length<6?0===w.length&&E(!0):e.password=!0,!(!e.email||!e.password)}),[f,w]),R=function(){var e=(d.state||{from:{pathname:"/"}}).from;i.replace(e)},M=Object(c.useCallback)((function(t){var c,r;(t.preventDefault(),z())&&(n||e((c={email:f,password:w},r=R,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(K.actions.request()),fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.email,password:c.password})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!t.success)throw Error(t.message);e(K.actions.setEmail(t.user.email)),e(K.actions.setName(t.user.name)),P("accessToken",t.accessToken,{path:"/"}),P("refreshToken",t.refreshToken,{path:"/"}),e(K.actions.setAuthorization(!0)),e(K.actions.success()),r()})).catch((function(t){e(K.actions.setAuthorization(!1)),e(K.actions.failed()),console.log(t)}))})))}),[f,w,n]);return Object(A.jsxs)(A.Fragment,{children:[n&&!s&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:"fullscreen_message",children:[s&&!n&&!r&&Object(A.jsxs)("div",{className:"flex_column mb-30",children:[Object(A.jsx)("h2",{className:"mb-10 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:_,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!s&&Object(A.jsxs)(Ie,{title:"\u0412\u0445\u043e\u0434",actionName:"\u0412\u043e\u0439\u0442\u0438",onFormSubmit:M,children:[Object(A.jsx)(I.Input,{type:"email",placeholder:"E-mail",onChange:function(e){q.test(e.target.value)&&g(!0),b(e.target.value)},value:f,name:"email",error:!O,ref:F,errorText:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d e-mail",size:"default"}),Object(A.jsx)("div",{className:T?"password_error":"",children:Object(A.jsx)(I.PasswordInput,{onChange:function(e){0!==e.target.value.length&&E(!1),N(e.target.value)},value:w,name:"password"})})]}),Object(A.jsxs)("div",{className:"bottom_navigation",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){i.replace({pathname:"/register"})},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(A.jsxs)("div",{className:"bottom_navigation mt-4",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){i.replace({pathname:"/forgot-password"})},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},qe=function(){var e=o(),t=l((function(e){return e.user})),n=t.userRequest,r=t.userSuccess,s=t.userFailed,a=K.actions.resetStatus,i=Object(u.g)(),d=Object(u.h)(),_=function(){e(a())};Object(c.useEffect)((function(){_()}),[]);var m=Object(c.useState)(""),j=Object(S.a)(m,2),f=j[0],b=j[1],p=Object(c.useState)(!1),h=Object(S.a)(p,2),O=h[0],g=h[1],v=Object(c.useState)(""),y=Object(S.a)(v,2),w=y[0],N=y[1],k=Object(c.useState)(!0),C=Object(S.a)(k,2),T=C[0],E=C[1],F=Object(c.useState)(""),q=Object(S.a)(F,2),z=q[0],R=q[1],M=Object(c.useState)(!1),D=Object(S.a)(M,2),B=D[0],U=D[1],L=Object(c.useRef)(null),V=Object(c.useRef)(null),H=/.+@.+\.[A-Za-z]+$/,J=Object(c.useCallback)((function(){var e={email:!1,password:!1,name:!1};return H.test(w)?e.email=!0:E(!1),z.length<6?0===z.length&&U(!0):e.password=!0,0===f.length?g(!0):e.name=!0,!!(e.email&&e.password&&e.name)}),[w,z,f]),W=function(){var e=(d.state||{from:{pathname:"/"}}).from;i.replace(e)},X=Object(c.useCallback)((function(t){var c,r;(t.preventDefault(),J())&&(n||e((c={name:f,email:w,password:z},r=W,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(K.actions.request()),fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.email,password:c.password,name:c.name})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!t.success)throw Error(t.message);e(K.actions.setEmail(t.user.email)),e(K.actions.setName(t.user.name)),P("accessToken",t.accessToken,{path:"/"}),P("refreshToken",t.refreshToken,{path:"/"}),e(K.actions.setAuthorization(!0)),e(K.actions.success()),r()})).catch((function(t){e(K.actions.setAuthorization(!1)),e(K.actions.failed()),console.log(t)}))})))}),[w,f,z,n]);return Object(A.jsxs)(A.Fragment,{children:[n&&!s&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:"fullscreen_message",children:[s&&!n&&!r&&Object(A.jsxs)("div",{className:"flex_column mb-30",children:[Object(A.jsx)("h2",{className:"mb-10 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:_,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!s&&Object(A.jsxs)(Ie,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",actionName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onFormSubmit:X,children:[Object(A.jsx)(I.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){e.target.value.length>0&&g(!1),b(e.target.value)},value:f,name:"name",error:O,ref:L,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default"}),Object(A.jsx)(I.Input,{type:"email",placeholder:"E-mail",onChange:function(e){H.test(e.target.value)&&E(!0),N(e.target.value)},value:w,name:"email",error:!T,ref:V,errorText:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d e-mail",size:"default"}),Object(A.jsx)("div",{className:B?"password_error":"",children:Object(A.jsx)(I.PasswordInput,{onChange:function(e){0!==e.target.value.length&&U(!1),R(e.target.value)},value:z,name:"password"})})]}),Object(A.jsxs)("div",{className:"bottom_navigation",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){i.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})},ze=function(){var e=o(),t=l((function(e){return e.user})),n=t.userRequest,r=t.userSuccess,s=t.userFailed,a=K.actions.resetStatus,i=Object(u.g)(),d=function(){e(a())};Object(c.useEffect)((function(){d()}),[]);var _=Object(c.useState)(""),m=Object(S.a)(_,2),j=m[0],f=m[1],p=Object(c.useState)(!0),x=Object(S.a)(p,2),h=x[0],O=x[1],g=Object(c.useRef)(null),v=/.+@.+\.[A-Za-z]+$/,y=function(){i.replace({pathname:"/reset-password",state:{from:"/forgot-password"}})},w=Object(c.useCallback)((function(t){var c,r;(t.preventDefault(),function(){var e={email:!1};return v.test(j)?e.email=!0:O(!1),!!e.email}())&&(n||e((c=j,r=y,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(K.actions.request()),fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!t.success)throw Error(t.message);e(K.actions.success()),r()})).catch((function(t){e(K.actions.failed()),console.log(t)}))})))}),[j,n]);return Object(A.jsxs)(A.Fragment,{children:[n&&!s&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:"fullscreen_message",children:[s&&!n&&!r&&Object(A.jsxs)("div",{className:"flex_column mb-30",children:[Object(A.jsx)("h2",{className:"mb-10 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:d,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!s&&Object(A.jsx)(Ie,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",actionName:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",onFormSubmit:w,children:Object(A.jsx)(I.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){v.test(e.target.value)&&O(!0),f(e.target.value)},value:j,name:"email",error:!h,ref:g,errorText:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d e-mail",size:"default"})}),Object(A.jsxs)("div",{className:"bottom_navigation mt-4",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){i.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})},Re=n(106),Ae=n.n(Re),Me=function(){var e=o(),t=l((function(e){return e.user})),n=t.userRequest,r=t.userSuccess,s=t.userFailed,a=K.actions.resetStatus,i=Object(u.g)(),d=function(){e(a())};Object(c.useEffect)((function(){d()}),[]);var _=Object(c.useState)(""),m=Object(S.a)(_,2),j=m[0],f=m[1],b=Object(c.useState)(!1),x=Object(S.a)(b,2),h=x[0],O=x[1],g=Object(c.useState)(""),v=Object(S.a)(g,2),y=v[0],w=v[1],N=Object(c.useState)(!1),k=Object(S.a)(N,2),C=k[0],T=k[1],E=Object(c.useRef)(null),F=Object(c.useCallback)((function(){var e={password:!1,code:!1};return j.length<6?0===j.length&&O(!0):e.password=!0,0===y.length?T(!0):e.code=!0,!(!e.password||!e.code)}),[y,j]),q=function(){i.replace({pathname:"/login"})},z=Object(c.useCallback)((function(t){var c,r,s;(t.preventDefault(),F())&&(n||e((c=y,r=j,s=q,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(K.actions.request()),fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,token:c})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!t.success)throw Error(t.message);e(K.actions.success()),s()})).catch((function(t){e(K.actions.failed()),console.log(t)}))})))}),[y,j,n]);return Object(A.jsxs)(A.Fragment,{children:[n&&!s&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:Ae.a.reset_password_container+" fullscreen_message",children:[s&&!n&&!r&&Object(A.jsxs)("div",{className:"flex_column mb-30",children:[Object(A.jsx)("h2",{className:"mb-10 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:d,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!s&&Object(A.jsxs)(Ie,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",actionName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onFormSubmit:z,children:[Object(A.jsx)("div",{className:h?"password_error":"",children:Object(A.jsx)(I.PasswordInput,{onChange:function(e){0!==e.target.value.length&&O(!1),f(e.target.value)},value:j,name:"password"})}),Object(A.jsx)(I.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){e.target.value.length>0&&T(!1),w(e.target.value)},value:y,name:"code",error:C,ref:E,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default"})]}),Object(A.jsxs)("div",{className:"bottom_navigation mt-4",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){i.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})},De=n(43),Be=n.n(De),Pe=n(107),Ue=n.n(Pe),Le=n(20),Ve=n.n(Le),He=function(e){var t=e.order,n=e.source,r=Object(u.g)(),s=l((function(e){return e.items})).items,a=Object(c.useState)(""),i=Object(S.a)(a,2),o=i[0],d=i[1],_=Object(c.useState)(""),m=Object(S.a)(_,2),j=m[0],f=m[1];Object(c.useEffect)((function(){switch(t.status){case"created":d("\u0421\u043e\u0437\u0434\u0430\u043d");break;case"pending":d("\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f");break;case"done":d("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),f(Ve.a.status_completed);break;case"canceled":d("\u041e\u0442\u043c\u0435\u043d\u0451\u043d"),f(Ve.a.status_canceled)}}),[t.status]);var b=Object(c.useCallback)((function(){return t.createdAt&&D(t.createdAt)}),[t.createdAt]),p=t.ingredients&&t.ingredients.map((function(e){return s.find((function(t){return t._id===e}))})),x=p&&p.filter((function(e){return e})),h=x&&x.find((function(e){return e&&"bun"===e.type})),O=x&&x.filter((function(e){return e&&"bun"!==e.type})),g=Object(c.useCallback)((function(){var e=O;if(e&&e.splice(0,0,h),e)return e.map((function(t,n){return n>5?null:t&&t._id&&Object(A.jsxs)("li",{children:[Object(A.jsx)("span",{className:Ve.a.ingredient_icon_wrapper,style:{zIndex:10-n},children:Object(A.jsx)("img",{src:t.image_mobile,alt:t.name,title:t.name,width:"112px",className:"ingredient_icon"})}),5===n?Object(A.jsxs)("span",{className:Ve.a.more_ingredients_icon,children:[Object(A.jsx)("p",{className:Ve.a.more_icon_text+" text text_type_main-default",children:e&&e.length?"+".concat(e.length-5):null}),Object(A.jsx)("span",{className:Ve.a.more_icon_wrapper})]}):null]},t._id+n)}))}),[O,h]),v=Object(c.useCallback)((function(){return h&&h.price&&O?h.price+O.reduce((function(e,t){return t?e+(t.price||0):0}),0):0}),[h,O]);return h&&h._id?Object(A.jsxs)("li",{className:Ve.a.order_card,onClick:function(){var e=r.location.pathname;r.replace({pathname:"".concat(e,"/").concat(t._id),state:{background:r.location}})},children:[Object(A.jsxs)("div",{className:Ve.a.order_info,children:[Object(A.jsx)("p",{className:"text text_type_digits-default",children:"number"===typeof t.number?"#".concat(t.number.toString().padStart(6,"0")):null}),Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:b()})]}),Object(A.jsx)("p",{className:"mt-6 text text_type_main-medium",children:t.name}),"history"===n?Object(A.jsx)("p",{className:"".concat(j," mt-2 text text_type_main-default"),children:o}):null,Object(A.jsxs)("div",{className:Ve.a.order_info+" mt-6",children:[Object(A.jsx)("ul",{className:Ve.a.ingredient_icons_container,children:g()}),Object(A.jsxs)("div",{className:"flex_row ml-6",children:[Object(A.jsx)("p",{className:"text text_type_digits-default",children:v()}),Object(A.jsx)(I.CurrencyIcon,{type:"primary"})]})]})]}):null},Je=function(e,t){return!!e.order&&e.order.updatedAt!==t.order.updatedAt},We=Object(c.memo)(He,Je),Xe=function(e){var t=e.orders,n=e.source;return Object(A.jsx)(A.Fragment,{children:t.length>0&&Object(A.jsx)("ul",{className:Ue.a.orders_list,children:t.map((function(e){return Object(A.jsx)(We,{source:n,order:e},e._id)}))})})},Ze=n(26),Qe=n.n(Ze),Ge=function(){var e=l((function(e){return e.feed})),t=e.orders,n=e.ordersTotal,r=e.ordersTotalToday,s=Object(c.useCallback)((function(){return t.filter((function(e){return"done"===e.status})).slice(0,20).map((function(e){return e.number?Object(A.jsx)("li",{className:"text text_type_digits-default",children:e.number.toString().padStart(6,"0")},e._id):null}))}),[t]),a=Object(c.useCallback)((function(){return t.filter((function(e){return"pending"===e.status})).slice(0,20).map((function(e){return e.number?Object(A.jsx)("li",{className:"text text_type_digits-default",children:e.number.toString().padStart(6,"0")},e._id):null}))}),[t]);return Object(A.jsxs)("div",{className:Qe.a.panel_container,children:[Object(A.jsxs)("div",{className:Qe.a.orders_list_container,children:[Object(A.jsxs)("div",{className:Qe.a.orders_list_column,children:[Object(A.jsx)("p",{className:"mb-6 text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(A.jsx)("ul",{className:Qe.a.orders_list_completed,children:s()})]}),Object(A.jsxs)("div",{className:Qe.a.orders_list_column,children:[Object(A.jsx)("p",{className:"mb-6 text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(A.jsx)("ul",{className:Qe.a.orders_list_preparing,children:a()})]})]}),Object(A.jsx)("p",{className:"mt-15 text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:"}),Object(A.jsx)("p",{className:"text text_type_digits-large",children:n.toLocaleString()}),Object(A.jsx)("p",{className:"mt-15 text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(A.jsx)("p",{className:"text text_type_digits-large",children:r.toLocaleString()})]})},Ye=function(){var e=o(),t=l((function(e){return e.items})),n=t.itemsRequest,r=t.itemsSuccess,s=t.itemsFailed,a=l((function(e){return e.feed})),i=a.orders,u=a.feedRequest,d=a.feedSuccess,_=a.feedFailed,m=l((function(e){return e.ws})),j=m.wsConnected,f=m.wsError;return Object(c.useEffect)((function(){return e(V()),function(){e(H())}}),[]),Object(c.useEffect)((function(){j&&i.length>0?e(J.actions.success()):f&&e(J.actions.failed())}),[j,f,i]),Object(A.jsxs)(A.Fragment,{children:[(n||u)&&(!s||!_)&&(!r||!d)&&Object(A.jsx)(we,{}),(s||_)&&(!n||!u)&&(!r||!d)&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),r&&d&&(!s||!_)&&(!n||!u)&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h1",{className:Be.a.feed_title+" mt-10 mb-5 text text_type_main-large text_color_default",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(A.jsxs)("div",{className:Be.a.feed_container,children:[Object(A.jsx)("div",{className:Be.a.feed_orders_container,children:Object(A.jsx)(Xe,{source:"feed",orders:i})}),Object(A.jsx)("div",{className:Be.a.feed_info_container,children:Object(A.jsx)(Ge,{})})]})]})]})},Ke=n(21),$e=n.n(Ke),et=function(e){var t,n=e.order,r=e.isOrderModal,s=void 0!==r&&r,a=l((function(e){return e.items})).items,i=Object(c.useState)(""),o=Object(S.a)(i,2),u=o[0],_=o[1],m=Object(c.useState)(""),j=Object(S.a)(m,2),f=j[0],b=j[1];Object(c.useEffect)((function(){switch(n.status){case"created":_("\u0421\u043e\u0437\u0434\u0430\u043d");break;case"pending":_("\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f");break;case"done":_("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),b($e.a.status_completed);break;case"canceled":_("\u041e\u0442\u043c\u0435\u043d\u0451\u043d"),b($e.a.status_canceled)}}),[n.status]);var p=Object(c.useCallback)((function(){return n.createdAt?D(n.createdAt):""}),[n.createdAt]),x=n.ingredients?n.ingredients.map((function(e){return a.find((function(t){return(null===t||void 0===t?void 0:t._id)===e}))||{}})):[],h=x.find((function(e){return"bun"===e.type}))||{},O=x.filter((function(e){return"bun"!==e.type})),g=Object(c.useCallback)((function(){var e=O;e.splice(0,0,h);var t=(null===e||void 0===e?void 0:e.map((function(e){return Object(d.a)({count:1},e)}))).reduce((function(e,t){return t._id?(e[t._id]=Object(d.a)(Object(d.a)({},t),{},{count:(e[t._id]?e[t._id].count:0)+("bun"===t.type?2:1)}),e):null}),{}),n=[];for(var c in t)n.push(Object(A.jsxs)("li",{className:$e.a.ingredient_wrapper,children:[Object(A.jsx)("span",{className:"ingredient_icon_wrapper",children:Object(A.jsx)("img",{src:t[c].image_mobile,alt:t[c].name,title:t[c].name,width:"112px",className:"ingredient_icon"})}),Object(A.jsx)("p",{className:$e.a.ingredient_name+" text text_type_main-default",children:t[c].name}),Object(A.jsxs)("span",{className:$e.a.ingredient_price,children:[Object(A.jsx)("p",{className:"text text_type_digits-default",children:"".concat(t[c].count," x ").concat(t[c].price)}),Object(A.jsx)(I.CurrencyIcon,{type:"primary"})]})]},t[c]._id));return n}),[O,h]),v=Object(c.useCallback)((function(){var e,t,c=(null===(e=n.ingredients)||void 0===e?void 0:e.map((function(e){var t=a.find((function(t){return t._id===e}))||{};return{price:t.price,type:t.type}})))||[];return 2*((null===(t=c.find((function(e){return"bun"===e.type})))||void 0===t?void 0:t.price)||0)+c.reduce((function(e,t){return e+("bun"!==t.type&&t.price||0)}),0)}),[a,n.ingredients]);return Object(A.jsxs)("div",{className:$e.a.order_container,children:[!s&&Object(A.jsx)("p",{className:$e.a.order_id+" text text_type_digits-default",children:"#".concat(null===(t=n.number)||void 0===t?void 0:t.toString().padStart(6,"0"))}),Object(A.jsx)("p",{className:"mt-10 mb-3 text text_type_main-medium",children:n.name}),Object(A.jsx)("p",{className:"".concat(f," mt-2 text text_type_main-default"),children:u}),Object(A.jsx)("p",{className:"mt-15 mb-6 text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(A.jsx)("ul",{className:$e.a.ingredients_container+" pr-6",children:g()}),Object(A.jsxs)("div",{className:$e.a.order_info+" mt-10",children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:p()}),Object(A.jsxs)("div",{className:"flex_row ml-6",children:[Object(A.jsx)("p",{className:"text text_type_digits-default",children:v()}),Object(A.jsx)(I.CurrencyIcon,{type:"primary"})]})]})]})},tt=function(){var e=o(),t="feed"===Object(u.h)().pathname.split("/")[1],n=l((function(e){return e.items})),r=n.itemsRequest,s=n.itemsSuccess,a=n.itemsFailed,i=l((function(e){return e.feed})),d=i.orders,_=i.feedRequest,m=i.feedSuccess,j=i.feedFailed,f=l((function(e){return e.ws})),b=f.wsConnected,p=f.wsError,x=Object(c.useState)({}),h=Object(S.a)(x,2),O=h[0],g=h[1];Object(c.useEffect)((function(){return e(t?V():Z()),function(){e(t?H():Q())}}),[]);var v=Object(u.i)().id;return Object(c.useEffect)((function(){d&&d.length>0&&b?(g(d.find((function(e){return e._id===v}))||{}),e(J.actions.success())):e(p?J.actions.failed():J.actions.request())}),[b,d,p]),Object(A.jsxs)(A.Fragment,{children:[(r||_)&&(!a||!j)&&(!s||!m)&&Object(A.jsx)(we,{}),(a||j)&&(!r||!_)&&(!s||!m)&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),s&&m&&O!=={}&&(!a||!j)&&(!r||!_)&&Object(A.jsx)("div",{className:"fullscreen_message",children:Object(A.jsx)(et,{order:O})})]})},nt=function(){var e,t=o(),n=l((function(e){return e.items})),r=n.itemsRequest,s=n.itemsSuccess,a=n.itemsFailed,i=l((function(e){return e.feed})),_=i.orders,m=i.feedRequest,j=i.feedSuccess,f=i.feedFailed,b=l((function(e){return e.ws})),p=b.wsConnected,x=b.wsError,h=w.actions.request,O=Object(u.g)(),g=Object(u.h)();Object(c.useEffect)((function(){t(p?J.actions.success():x?J.actions.failed():J.actions.request())}),[p,x]);var v=Object(u.i)().id,y=_.find((function(e){return e._id===v}))||{},N=Object(c.useCallback)((function(){t(h()),O.replace(Object(d.a)(Object(d.a)({},O.location),{},{state:{background:void 0}}))}),[O]);return Object(c.useEffect)((function(){return window.addEventListener("beforeunload",N),function(){window.removeEventListener("beforeunload",N)}}),[]),Object(A.jsxs)(A.Fragment,{children:[(r||m)&&(!a||!f)&&(!s||!j)&&Object(A.jsx)(we,{}),(a||f)&&(!r||!m)&&(!s||!j)&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),s&&j&&(!a||!f)&&(!r||!m)&&Object(A.jsx)(pe,{header:"#".concat(null===(e=y.number)||void 0===e?void 0:e.toString().padStart(6,"0")),isOrderModal:!0,closeModal:function(){O.replace({pathname:g.state.background.pathname})},children:Object(A.jsx)(et,{order:y,isOrderModal:!0})})]})},ct=n(55),rt=n.n(ct),st=n(83),at=n.n(st),it=n(56),ot=n.n(it),lt=function(e){return Object(A.jsx)("li",{className:ot.a.sidebar_list_item,children:Object(A.jsx)("button",{className:"".concat(ot.a.sidebar_link,"\n        text text_type_main-default text_color_inactive\n        ").concat(e.active?ot.a.sidebar_link_active:""),onClick:e.onClick,title:e.text,children:e.text})})},ut=function(){var e=o(),t=l((function(e){return e.user})).userRequest,n=K.actions.resetStatus;Object(c.useEffect)((function(){e(n())}),[]);var r=Object(u.g)(),s=Object(c.useState)(!1),a=Object(S.a)(s,2),i=a[0],d=a[1],_=Object(c.useState)(!1),m=Object(S.a)(_,2),j=m[0],f=m[1],b=r.location.pathname;Object(c.useEffect)((function(){switch(b){case"/profile":d(!0);break;case"/profile/orders":f(!0)}}),[b]);return Object(A.jsxs)("aside",{className:at.a.sidebar_container,children:[Object(A.jsxs)("ul",{className:at.a.sidebar_list,children:[Object(A.jsx)(lt,{text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:function(){r.replace({pathname:"/profile"})},active:i}),Object(A.jsx)(lt,{text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",onClick:function(){r.replace({pathname:"/profile/orders"})},active:j}),Object(A.jsx)(lt,{text:"\u0412\u044b\u0445\u043e\u0434",onClick:function(){t||e((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(K.actions.request()),fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:B("refreshToken")})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(t){if(!t.success)throw Error(t.message);U("accessToken"),U("refreshToken"),e(K.actions.resetUserData()),e(K.actions.setAuthorization(!1)),e(K.actions.success())})).catch((function(t){e(K.actions.failed()),console.log(t)}))}))},active:!1})]}),Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},dt=function(){var e=o(),t=l((function(e){return e.user})),n=t.user,r=t.userRequest,s=t.userSuccess,a=t.userFailed,i=K.actions.resetStatus,u=Object(c.useState)(""),d=Object(S.a)(u,2),_=d[0],m=d[1],j=Object(c.useState)(""),f=Object(S.a)(j,2),b=f[0],p=f[1],x=Object(c.useState)(""),h=Object(S.a)(x,2),O=h[0],v=h[1];Object(c.useEffect)((function(){e(i()),s||r||e(W())}),[]),Object(c.useEffect)((function(){m(n.name||""),p(n.email||""),v(n.password||"")}),[n]);var y=Object(c.useState)(!0),w=Object(S.a)(y,2),N=w[0],k=w[1],C=Object(c.useState)(!1),T=Object(S.a)(C,2),E=T[0],F=T[1],q=Object(c.useState)(!0),z=Object(S.a)(q,2),R=z[0],M=z[1],D=Object(c.useState)(!1),U=Object(S.a)(D,2),L=U[0],V=U[1],H=Object(c.useState)(!1),J=Object(S.a)(H,2),Z=J[0],Q=J[1],G=Object(c.useRef)(null),Y=Object(c.useRef)(null);return Object(A.jsxs)(A.Fragment,{children:[r&&!a&&!s&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:rt.a.profile_container+" mt-30",children:[Object(A.jsx)(ut,{}),Object(A.jsxs)("div",{className:rt.a.form_container,children:[a&&!r&&!s&&Object(A.jsx)("h2",{className:"ml-30 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),s&&!a&&!r&&Object(A.jsxs)(Ie,{children:[Object(A.jsx)(I.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){e.target.value.length>0&&F(!1),m(e.target.value),Q(!0)},value:_,name:"name",error:E,ref:G,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default",icon:"EditIcon",onIconClick:function(){var e;null===(e=G.current)||void 0===e||e.focus(),k(!1)},disabled:N,onBlur:function(e){0===e.target.value.length&&F(!0),k(!0)}}),Object(A.jsx)(I.EmailInput,{onChange:function(e){p(e.target.value),Q(!0)},value:b,name:"email",size:"default"}),Object(A.jsx)(I.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){e.target.value.length>0&&V(!1),v(e.target.value),Q(!0)},value:O,name:"password",error:L,ref:Y,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default",icon:"EditIcon",onIconClick:function(){var e;null===(e=Y.current)||void 0===e||e.focus(),M(!1)},disabled:R,onBlur:function(e){0===e.target.value.length&&V(!0),M(!0)}}),Z&&Object(A.jsxs)("div",{className:rt.a.buttons_container,children:[Object(A.jsx)(I.Button,{type:"secondary",size:"medium",onClick:function(){m(n.name||""),p(n.email||""),v(n.password||""),Q(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(A.jsx)(I.Button,{type:"primary",size:"medium",onClick:function(){r||e(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=B("accessToken")||"",c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization",n),t(K.actions.request()),fetch(g,{method:"PATCH",headers:c,body:JSON.stringify({email:e.email,password:e.password,name:e.name})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(n){if(!0===n.success)t(K.actions.setName(n.user.name)),t(K.actions.setEmail(n.user.email)),t(K.actions.success());else{if("jwt expired"!==n.message)throw Error(n.message);X().then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(n){if(!0!==n.success)throw Error(n.message);P("accessToken",n.accessToken,{path:"/"}),P("refreshToken",n.refreshToken,{path:"/"}),c.delete("Authorization"),c.append("Authorization",n.accessToken||""),fetch(g,{method:"GET",headers:c,body:JSON.stringify({email:e.email,password:e.password,name:e.name})}).then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(e){if(!e.success)throw Error(e.message);t(K.actions.setName(e.user.name)),t(K.actions.setEmail(e.user.email)),t(K.actions.success())})).catch((function(e){t(K.actions.failed()),console.log(e)}))})).catch((function(e){t(K.actions.failed()),console.log(e)}))}})).catch((function(e){t(K.actions.failed()),console.log(e)}))}}({name:_,email:b,password:O})),Q(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})]})]})},_t=n(84),mt=n.n(_t),jt=function(){var e=o(),t=l((function(e){return e.items})),n=t.itemsRequest,r=t.itemsSuccess,s=t.itemsFailed,a=l((function(e){return e.user})),i=a.userRequest,u=a.userSuccess,d=a.userFailed,_=l((function(e){return e.feed})),m=_.orders,j=_.feedRequest,f=_.feedSuccess,b=_.feedFailed,p=K.actions.resetStatus,x=l((function(e){return e.ws})),h=x.wsConnected,O=x.wsError;return Object(c.useEffect)((function(){return e(p()),e(Z()),u||i||e(W()),function(){e(Q())}}),[]),Object(c.useEffect)((function(){h?e(J.actions.success()):O&&e(J.actions.failed())}),[h,O]),Object(A.jsxs)(A.Fragment,{children:[(n||i||j)&&(!s||!d||!b)&&(!r||!u||!f)&&Object(A.jsx)(we,{}),Object(A.jsxs)("div",{className:mt.a.history_container+" mt-30",children:[Object(A.jsx)(ut,{}),Object(A.jsxs)("div",{className:mt.a.history_orders_container,children:[(s||d||b)&&(!n||!i||!j)&&(!r||!u||!f)&&Object(A.jsx)("h2",{className:"ml-30 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),r&&u&&f&&(!s||!d||!b)&&(!n||!i||!j)&&Object(A.jsx)(Xe,{source:"history",orders:m})]})]})]})},ft=n(27),bt=n.n(ft),pt=function(e){var t=e.item;return Object(A.jsxs)("div",{className:bt.a.ingredient_details_container,children:[Object(A.jsx)("img",{src:t.image_large,alt:t.name,title:t.name}),Object(A.jsx)("h4",{className:"text text_type_main-medium mt-4 mb-8",children:t.name}),Object(A.jsxs)("ul",{className:bt.a.ingredient_nutrition_list,children:[Object(A.jsxs)("li",{className:bt.a.ingredient_nutrition_list_item,children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(A.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(A.jsxs)("li",{className:bt.a.ingredient_nutrition_list_item,children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(A.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(A.jsxs)("li",{className:bt.a.ingredient_nutrition_list_item,children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(A.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(A.jsxs)("li",{className:bt.a.ingredient_nutrition_list_item,children:[Object(A.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(A.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]})},xt=function(){var e=l((function(e){return e.items})),t=e.items,n=e.itemsRequest,c=e.itemsSuccess,r=e.itemsFailed,s=Object(u.i)().id;return Object(A.jsxs)(A.Fragment,{children:[n&&!r&&!c&&Object(A.jsx)(we,{}),r&&!n&&!c&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),c&&!r&&!n&&Object(A.jsxs)("div",{className:"fullscreen_message",children:[Object(A.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(A.jsx)(pt,{item:t.find((function(e){return e._id===s}))||{}})]})]})},ht=function(){var e=o(),t=l((function(e){return e.items})),n=t.items,r=t.itemsRequest,s=t.itemsSuccess,a=t.itemsFailed,i=w.actions.request,_=Object(u.g)(),m=Object(u.i)().id,j=n.find((function(e){return e._id===m}))||{},f=Object(c.useCallback)((function(){e(i()),_.replace(Object(d.a)(Object(d.a)({},_.location),{},{state:{background:void 0}}))}),[_]);return Object(c.useEffect)((function(){return window.addEventListener("beforeunload",f),function(){window.removeEventListener("beforeunload",f)}}),[]),Object(A.jsxs)(A.Fragment,{children:[r&&!a&&!s&&Object(A.jsx)(we,{}),a&&!r&&!s&&Object(A.jsx)("h2",{className:"fullscreen_message text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),s&&!a&&!r&&Object(A.jsx)(pe,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closeModal:function(){_.replace({pathname:"/"})},children:Object(A.jsx)(pt,{item:j})})]})},Ot=n(108),gt=n.n(Ot),vt=function(){return Object(A.jsxs)("div",{className:gt.a.fullscreen_message,children:[Object(A.jsx)("p",{className:"text text_type_digits-large text_color_inactive",children:"404"}),Object(A.jsx)("h1",{className:"text text_type_main-large text_color_inactive",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})},yt=n(23),wt=function(e){var t=e.children,n=Object(yt.a)(e,["children"]),r=o(),s=l((function(e){return e.user})).isAuthorized,a=K.actions.checkAuthorization;return Object(c.useEffect)((function(){r(a())}),[]),Object(A.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var n=e.location;return s?t:Object(A.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},Nt=function(e){var t=e.children,n=Object(yt.a)(e,["children"]),c=(Object(u.h)().state||{from:{pathname:"/"}}).from;return Object(A.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(){return"/forgot-password"===c?t:Object(A.jsx)(u.a,{to:{pathname:"/forgot-password"}})}}))},kt=function(e){var t=e.children,n=Object(yt.a)(e,["children"]),r=o(),s=l((function(e){return e.user})).isAuthorized,a=K.actions.checkAuthorization;Object(c.useEffect)((function(){r(a())}),[]);var i=Object(u.h)();return Object(A.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(){return s?Object(A.jsx)(u.a,{to:!!i.state&&i.state.from||{pathname:"/profile"}}):t}}))},St=n(28),Ct=n.n(St),Tt=n(44),Et=n.n(Tt),It=function(e){return Object(A.jsxs)("button",{className:"".concat(Et.a.menu_list_item,"\n                pl-5 pr-5 pt-4 pb-4 mt-4 mb-4\n                ").concat(e.active?Et.a.menu_list_item_active:""),onClick:e.onClick,title:e.text,children:[Object(A.jsx)("span",{className:Et.a.menu_list_item_icon+" mr-2",children:e.icon}),Object(A.jsx)("span",{className:Et.a.menu_list_item_text+" text text_type_main-default text_color_inactive",children:e.text})]})},Ft=function(){var e=Object(u.g)(),t=Object(c.useState)(!1),n=Object(S.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!1),i=Object(S.a)(a,2),o=i[0],l=i[1],d=Object(c.useState)(!1),_=Object(S.a)(d,2),m=_[0],j=_[1],f=e.location.pathname;Object(c.useEffect)((function(){switch(f){case"/":s(!0),l(!1),j(!1);break;case"/feed":l(!0),s(!1),j(!1);break;case"/profile":case"/profile/orders":j(!0),s(!1),l(!1)}}),[f]);return Object(A.jsx)("header",{children:Object(A.jsx)("nav",{className:Ct.a.menu_container,children:Object(A.jsxs)("ul",{className:Ct.a.menu_list,children:[Object(A.jsx)("li",{className:Ct.a.menu_list_left,children:Object(A.jsxs)("ul",{className:Ct.a.menu_list_left_items,children:[Object(A.jsx)("li",{children:Object(A.jsx)(It,{icon:Object(A.jsx)(I.BurgerIcon,{type:r?"primary":"secondary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",onClick:function(){e.replace({pathname:"/"})},active:r})}),Object(A.jsx)("li",{children:Object(A.jsx)(It,{icon:Object(A.jsx)(I.ListIcon,{type:o?"primary":"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",onClick:function(){e.replace({pathname:"/feed"})},active:o})})]})}),Object(A.jsx)("li",{className:Ct.a.menu_list_center,onClick:function(){e.replace({pathname:"/"})},children:Object(A.jsx)(I.Logo,{})}),Object(A.jsx)("li",{className:Ct.a.menu_list_right,children:Object(A.jsx)("span",{children:Object(A.jsx)(It,{icon:Object(A.jsx)(I.ProfileIcon,{type:m?"primary":"secondary"}),text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",onClick:function(){e.replace({pathname:"/profile"})},active:m})})})]})})})},qt=function(){var e=o(),t=Object(u.h)(),n=t.state&&t.state.background,r=l((function(e){return e.items})).itemsSuccess;return Object(c.useEffect)((function(){r||e((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();e(w.actions.request()),fetch(j).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){var n=t.data;e(w.actions.success(n))})).catch((function(t){console.log(t),e(w.actions.failed())}))}))}),[e,r]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ft,{}),Object(A.jsxs)(u.d,{location:n||t,children:[Object(A.jsx)(u.b,{path:"/",exact:!0,children:Object(A.jsx)(Ce,{})}),Object(A.jsx)(kt,{path:"/login",exact:!0,children:Object(A.jsx)(Fe,{})}),Object(A.jsx)(kt,{path:"/register",exact:!0,children:Object(A.jsx)(qe,{})}),Object(A.jsx)(kt,{path:"/forgot-password",exact:!0,children:Object(A.jsx)(ze,{})}),Object(A.jsx)(Nt,{path:"/reset-password",exact:!0,children:Object(A.jsx)(Me,{})}),Object(A.jsx)(u.b,{path:"/feed",exact:!0,children:Object(A.jsx)(Ye,{})}),Object(A.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(A.jsx)(tt,{})}),Object(A.jsx)(wt,{path:"/profile",exact:!0,children:Object(A.jsx)(dt,{})}),Object(A.jsx)(wt,{path:"/profile/orders",exact:!0,children:Object(A.jsx)(jt,{})}),Object(A.jsx)(wt,{path:"/profile/orders/:id",exact:!0,children:Object(A.jsx)(tt,{})}),Object(A.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(A.jsx)(xt,{})}),Object(A.jsx)(u.b,{children:Object(A.jsx)(vt,{})})]}),n&&"/"===n.pathname&&Object(A.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(A.jsx)(ht,{})}),n&&"/profile/orders"===n.pathname&&Object(A.jsx)(wt,{path:"/profile/orders/:id",exact:!0,children:Object(A.jsx)(nt,{})}),n&&"/feed"===n.pathname&&Object(A.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(A.jsx)(nt,{})})]})},zt=n(9),Rt=n(38),At=n(18),Mt=Object(At.b)({items:w.reducer,order:$.reducer,burgerConstructor:R.reducer,user:K.reducer,feed:J.reducer,ws:L.reducer}),Dt=L.actions,Bt=Dt.wsConnectionStart,Pt=Dt.wsConnectionStop,Ut=Dt.wsConnectionSuccess,Lt=Dt.wsConnectionError,Vt=Dt.wsConnectionClosed,Ht=Object(m.a)({reducer:Mt,middleware:function(e){return e().prepend(Rt.a,(function(e){var t=null;return function(n){return function(c){var r=e.dispatch,s=c.type,a=c.payload;if(s===Bt.type){var i=a.token?"".concat(a.url,"?token=").concat(a.token):"".concat(a.url);t=new WebSocket(i)}s===Pt.type&&t&&t.close(1e3,"CLOSE_NORMAL"),t&&(t.onopen=function(e){r(Ut())},t.onerror=function(e){r(Lt())},t.onmessage=function(e){var n=e.data,c=JSON.parse(n),s=(c.success,Object(yt.a)(c,["success"]));s.message&&"Invalid or missing token"===s.message&&(t&&t.close(1e3,"CLOSE_NORMAL"),X().then((function(e){if(!e.ok&&e.status>=500)throw Error(e.statusText);return e.json()})).then((function(e){if(!0!==e.success)throw Error(e.message);P("accessToken",e.accessToken,{path:"/"}),P("refreshToken",e.refreshToken,{path:"/"});var n=e.accessToken.replace("Bearer ",""),c="".concat(y,"?token=").concat(n);t=new WebSocket(c)})).catch((function(e){r(Lt()),console.log(e)}))),r(J.actions.setOrdersData(s))},t.onclose=function(e){r(Vt())}),n(c)}}}))},devTools:!1});a.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(i.a,{store:Ht,children:Object(A.jsx)(zt.a,{basename:"/react-burger",children:Object(A.jsx)(qt,{})})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={order_card:"orders-card_order_card__JPuJs flex_column order_card_box_shadow mb-6",order_info:"orders-card_order_info__14qvL flex_row",ingredient_icons_container:"orders-card_ingredient_icons_container__3rh45",ingredient_icon_wrapper:"orders-card_ingredient_icon_wrapper__3RGh3 ingredient_icon_wrapper",more_ingredients_icon:"orders-card_more_ingredients_icon__ThBXa",more_icon_text:"orders-card_more_icon_text__1z-ro",more_icon_wrapper:"orders-card_more_icon_wrapper__35tDl",status_completed:"orders-card_status_completed__3X3kq",status_canceled:"orders-card_status_canceled__2wWwR"}},21:function(e,t,n){e.exports={order_container:"order-detailed-view_order_container__2yWWM flex_column",order_id:"order-detailed-view_order_id__noquR",order_info:"order-detailed-view_order_info__3-3Mi flex_row",ingredient_wrapper:"order-detailed-view_ingredient_wrapper__1DuMU flex_row",ingredients_container:"order-detailed-view_ingredients_container__2E_f1 flex_column scroll",ingredient_name:"order-detailed-view_ingredient_name__1M3Wz",ingredient_price:"order-detailed-view_ingredient_price__2-GK2",status_completed:"order-detailed-view_status_completed__1qDYW",status_canceled:"order-detailed-view_status_canceled__2O_i3"}},24:function(e,t,n){e.exports={burger_constructor_list:"burger-constructor_burger_constructor_list__2tHjV flex_column",burger_constructor_draggable_list:"burger-constructor_burger_constructor_draggable_list__30oZv burger-constructor_burger_constructor_list__2tHjV flex_column scroll",burger_constructor_order:"burger-constructor_burger_constructor_order__2HCiC flex_row",warningText:"burger-constructor_warningText__2esOG",emptyBun:"burger-constructor_emptyBun__3ULsd",disabled:"burger-constructor_disabled__22-gR"}},26:function(e,t,n){e.exports={panel_container:"feed-info-panel_panel_container__useKe flex_column scroll",orders_list_container:"feed-info-panel_orders_list_container__ejgd2 flex_row",orders_list_column:"feed-info-panel_orders_list_column__2V_FF",orders_list_completed:"feed-info-panel_orders_list_completed__hIwOM flex_column",orders_list_preparing:"feed-info-panel_orders_list_preparing__iXH9w flex_column",order_id:"feed-info-panel_order_id__qJHat",order_info:"feed-info-panel_order_info__1jNZP flex_row",ingredient_wrapper:"feed-info-panel_ingredient_wrapper__B9_tz flex_row",ingredients_container:"feed-info-panel_ingredients_container__3fcSk flex_column scroll",ingredient_name:"feed-info-panel_ingredient_name__2bXyX",ingredient_price:"feed-info-panel_ingredient_price__38BcF",status_completed:"feed-info-panel_status_completed__3ocU_",status_canceled:"feed-info-panel_status_canceled__3ySjT"}},27:function(e,t,n){e.exports={ingredient_details_container:"ingredient-details_ingredient_details_container__3c1XZ flex_column",ingredient_nutrition_list:"ingredient-details_ingredient_nutrition_list__1NOWq flex_row",ingredient_nutrition_list_item:"ingredient-details_ingredient_nutrition_list_item__3TET_ flex_column"}},28:function(e,t,n){e.exports={menu_container:"app-header_menu_container__5o1fa flex_row card_box_shadow",menu_list:"app-header_menu_list__PoRRQ flex_row",menu_list_left:"app-header_menu_list_left__3vNSg",menu_list_left_items:"app-header_menu_list_left_items__1zhYf flex_row",menu_list_center:"app-header_menu_list_center__3-73k flex_row",menu_list_right:"app-header_menu_list_right__1ZV9e flex_row"}},32:function(e,t,n){e.exports={dropContainer:"draggable-constructor-element_dropContainer__1P2Bf",dropContainerPushed:"draggable-constructor-element_dropContainerPushed__LHOXU",drag_icon:"draggable-constructor-element_drag_icon__2NKSM",draggable_list_item:"draggable-constructor-element_draggable_list_item__1K-AH flex_row",dragged:"draggable-constructor-element_dragged__3yXyW",pushedUp:"draggable-constructor-element_pushedUp__Q3q1p",pushedDown:"draggable-constructor-element_pushedDown__1CSUY"}},42:function(e,t,n){e.exports={modal_container:"modal_modal_container__2vFow card_box_shadow flex_column",modal_header:"modal_modal_header__gVKs2 flex_row",close_icon:"modal_close_icon__1ENxs",fancy_icon:"modal_fancy_icon__24ZC1"}},43:function(e,t,n){e.exports={feed_container:"feed_feed_container__1fywj flex_row",feed_orders_container:"feed_feed_orders_container__98bPA",feed_info_container:"feed_feed_info_container__3MW1u",feed_title:"feed_feed_title__3Uold"}},44:function(e,t,n){e.exports={menu_list_item:"menu-item_menu_list_item__8z3Ob",menu_list_item_icon:"menu-item_menu_list_item_icon__2wihD",menu_list_item_active:"menu-item_menu_list_item_active__EUwos",menu_list_item_text:"menu-item_menu_list_item_text__3WUVw"}},52:function(e,t,n){e.exports={container:"home_container__21QWL flex_row",container_left:"home_container_left__3XAF9",container_right:"home_container_right__39Rur"}},54:function(e,t,n){e.exports={order_details_container:"order-details_order_details_container__NTrmh flex_column",order_id:"order-details_order_id__2YBV4",loader_container:"order-details_loader_container__1jeSx flex_column"}},55:function(e,t,n){e.exports={profile_container:"profile_profile_container__1lDUw flex_row",form_container:"profile_form_container__1Rw1F",buttons_container:"profile_buttons_container__FWZAo flex_row"}},56:function(e,t,n){e.exports={sidebar_list_item:"sidebar-link_sidebar_list_item__3huwe",sidebar_link:"sidebar-link_sidebar_link__dC9up",sidebar_link_active:"sidebar-link_sidebar_link_active__2-G3c"}},79:function(e,t,n){e.exports={tab_selector:"burger-ingredients_tab_selector__1cix3 flex_row",scroll_container:"burger-ingredients_scroll_container__3k8oQ scroll"}},80:function(e,t,n){e.exports={ingredient_card:"burger-ingredients-card_ingredient_card__3DW8s flex_column",ingredient_image:"burger-ingredients-card_ingredient_image__1gPXp",ingredient_name:"burger-ingredients-card_ingredient_name__1rNve"}},81:function(e,t,n){e.exports={loader:"loader_loader__31U88 flex_row",spinner:"loader_spinner__zXvWA",spin:"loader_spin__3GevV"}},83:function(e,t,n){e.exports={sidebar_container:"sidebar_sidebar_container__3ny5C",sidebar_list:"sidebar_sidebar_list__21_qC flex_column"}},84:function(e,t,n){e.exports={history_container:"history_history_container__2SrKS flex_row",history_orders_container:"history_history_orders_container__1Ur-7"}}},[[188,1,2]]]);
//# sourceMappingURL=main.4aeb688c.chunk.js.map